<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>PortWindow.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">src (May 26, 2021 9:58:16 PM)</a> &gt; <a href="../../index.html" class="el_group">IslandTraderGUI</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">gui</a> &gt; <span class="el_source">PortWindow.java</span></div><h1>PortWindow.java</h1><pre class="source lang-java linenums">package gui;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingConstants;

import main.GUIGameEnvironment;
import map.Route;

import java.awt.Font;
import javax.swing.JTextArea;
import java.awt.Color;
import javax.swing.JButton;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.Enumeration;

import javax.swing.JRadioButton;
import javax.swing.JSeparator;
import javax.swing.AbstractButton;
import javax.swing.ButtonGroup;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JScrollPane;
import javax.swing.JSlider;
import javax.swing.event.ChangeListener;
import javax.swing.event.ChangeEvent;

/**
 * The PortWindow is one of the the GUI interface objects for running the game.
 * It provides all the available command options at port, gets users choices and
 * calls the related methods through the attribute manager -
 * {@link GUIGameEnvironment} object - to change the state of the game.
 * &lt;p&gt;
 * The PortWindow also updates the status bar and prints the report after the
 * implementation of each command.
 * 
 * @author Finn van Dorsser
 * @author Meng Zhang
 */

public class PortWindow {

	/**
	 * Attribute portFrame stores the Frame object of this window.
	 */
	private JFrame portFrame;

	/**
	 * Attribute destinationButtonGroup stores a ButtonGroup object including all
	 * the RadioButtons with the name of the available Island objects.
	 */
<span class="nc" id="L54">	private final ButtonGroup destinationButtonGroup = new ButtonGroup();</span>

	/**
	 * Attribute manager is the {@link GUIGameEnvironment} object which maintains
	 * the state of the program and makes instances of window classes.
	 */
	private GUIGameEnvironment manager;

	// This static main method is only used for initializing this window frame
	// individually for testing
	/*
	 * public static void main(String[] args) { EventQueue.invokeLater(new
	 * Runnable() { public void run() { try { PortWindow window = new PortWindow();
	 * window.frame.setVisible(true); } catch (Exception e) { e.printStackTrace(); }
	 * } }); }
	 */

	/**
	 * This constructor sets the value of manager attribute, initializes this Frame
	 * object and sets this frame to be visible.
	 * 
	 * @param incomingManager the current {@link GUIGameEnvironment} object
	 */
<span class="nc" id="L77">	public PortWindow(GUIGameEnvironment incomingManager) {</span>
<span class="nc" id="L78">		this.manager = incomingManager;</span>
<span class="nc" id="L79">		initialize();</span>
<span class="nc" id="L80">		portFrame.setVisible(true);</span>
<span class="nc" id="L81">	}</span>

	/**
	 * This method disposes this window frame.
	 */
	public void closePortWindow() {
<span class="nc" id="L87">		portFrame.dispose();</span>
<span class="nc" id="L88">	}</span>

	/**
	 * This method closes this window frame and launches the StoreWindow frame by
	 * calling the closeSetupWindow method from manager which is the current
	 * {@link GUIGameEnvironment} object.
	 */
	public void finishedPortWindow() {
<span class="nc" id="L96">		this.manager.closePortWindow(this);</span>
<span class="nc" id="L97">	}</span>

	/**
	 * This method closes this window frame and launches the SetupWindow frame by
	 * calling the restartSetupWindow method from manager which is the current
	 * {@link GUIGameEnvironment} object.
	 */
	public void restartSetupWindow() {

		// close portWindow and start setupWindow
<span class="nc" id="L107">		this.manager.restartSetupWindow(this);</span>
<span class="nc" id="L108">	}</span>

	/**
	 * This method initializes the contents of the frame.
	 */
	private void initialize() {
<span class="nc" id="L114">		portFrame = new JFrame();</span>
<span class="nc" id="L115">		portFrame.setTitle(&quot;Island Trader  - PORT&quot;);</span>
<span class="nc" id="L116">		portFrame.setBounds(100, 100, 752, 901);</span>
<span class="nc" id="L117">		portFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L118">		portFrame.getContentPane().setLayout(null);</span>

<span class="nc" id="L120">		JLabel portLabel = new JLabel(&quot;Port&quot;);</span>
<span class="nc" id="L121">		portLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 18));</span>
<span class="nc" id="L122">		portLabel.setBounds(0, 10, 689, 20);</span>
<span class="nc" id="L123">		portLabel.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L124">		portFrame.getContentPane().add(portLabel);</span>

<span class="nc" id="L126">		JLabel NameLabel = new JLabel(&quot;Name: &quot;);</span>
<span class="nc" id="L127">		NameLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L128">		NameLabel.setBounds(61, 54, 70, 15);</span>
<span class="nc" id="L129">		portFrame.getContentPane().add(NameLabel);</span>

<span class="nc" id="L131">		JLabel nameDisplayLabel = new JLabel(&quot;N/A&quot;);</span>
<span class="nc" id="L132">		portLabel.setLabelFor(nameDisplayLabel);</span>
<span class="nc" id="L133">		nameDisplayLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L134">		nameDisplayLabel.setBounds(130, 54, 200, 15);</span>
<span class="nc" id="L135">		portFrame.getContentPane().add(nameDisplayLabel);</span>

<span class="nc" id="L137">		JLabel DaysLabel = new JLabel(&quot;Remaining Days:&quot;);</span>
<span class="nc" id="L138">		DaysLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L139">		DaysLabel.setBounds(350, 54, 150, 15);</span>
<span class="nc" id="L140">		portFrame.getContentPane().add(DaysLabel);</span>

<span class="nc" id="L142">		JLabel DaysDisplayLabel = new JLabel(&quot;N/A&quot;);</span>
<span class="nc" id="L143">		DaysLabel.setLabelFor(DaysDisplayLabel);</span>
<span class="nc" id="L144">		DaysDisplayLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L145">		DaysDisplayLabel.setBounds(500, 54, 140, 15);</span>
<span class="nc" id="L146">		portFrame.getContentPane().add(DaysDisplayLabel);</span>

<span class="nc" id="L148">		JLabel moneyLabel = new JLabel(&quot;Money: &quot;);</span>
<span class="nc" id="L149">		moneyLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L150">		moneyLabel.setBounds(61, 85, 70, 15);</span>
<span class="nc" id="L151">		portFrame.getContentPane().add(moneyLabel);</span>

<span class="nc" id="L153">		JLabel moneyDisplayLabel = new JLabel(&quot;N/A&quot;);</span>
<span class="nc" id="L154">		moneyLabel.setLabelFor(moneyDisplayLabel);</span>
<span class="nc" id="L155">		moneyDisplayLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L156">		moneyDisplayLabel.setBounds(130, 85, 140, 15);</span>
<span class="nc" id="L157">		portFrame.getContentPane().add(moneyDisplayLabel);</span>

<span class="nc" id="L159">		JLabel locationLabel = new JLabel(&quot;Location: &quot;);</span>
<span class="nc" id="L160">		locationLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L161">		locationLabel.setBounds(350, 85, 85, 15);</span>
<span class="nc" id="L162">		portFrame.getContentPane().add(locationLabel);</span>

<span class="nc" id="L164">		JLabel locationDisplayLabel = new JLabel(&quot;N/A&quot;);</span>
<span class="nc" id="L165">		locationDisplayLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L166">		locationDisplayLabel.setBounds(440, 85, 200, 15);</span>
<span class="nc" id="L167">		portFrame.getContentPane().add(locationDisplayLabel);</span>

		// update status labels
<span class="nc" id="L170">		String name = manager.getTraderName();</span>
<span class="nc" id="L171">		int days = manager.getRemainingDays();</span>
<span class="nc" id="L172">		int money = manager.getOwnedMoney();</span>
<span class="nc" id="L173">		String islandLocation = manager.getCurrentIslandName();</span>

<span class="nc" id="L175">		nameDisplayLabel.setText(name);</span>
<span class="nc" id="L176">		DaysDisplayLabel.setText(String.valueOf(days));</span>
<span class="nc" id="L177">		moneyDisplayLabel.setText(String.valueOf(money));</span>
<span class="nc" id="L178">		locationDisplayLabel.setText(islandLocation);</span>
		// ====================

		// Report text area
<span class="nc" id="L182">		JTextArea reportText = new JTextArea();</span>
<span class="nc" id="L183">		reportText.setBackground(Color.WHITE);</span>
<span class="nc" id="L184">		reportText.setEditable(false);</span>
<span class="nc" id="L185">		reportText.setText(&quot;The report will be shown here.&quot;);</span>
<span class="nc" id="L186">		reportText.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L187">		reportText.setLineWrap(true);</span>
<span class="nc" id="L188">		reportText.setWrapStyleWord(true);</span>
<span class="nc" id="L189">		reportText.setBounds(50, 127, 600, 276);</span>
<span class="nc" id="L190">		portFrame.getContentPane().add(reportText);</span>

<span class="nc" id="L192">		JScrollPane scrollPane = new JScrollPane(reportText);</span>
<span class="nc" id="L193">		scrollPane.setBounds(48, 127, 650, 276);</span>
<span class="nc" id="L194">		portFrame.getContentPane().add(scrollPane);</span>

		// update report when initializing
<span class="nc" id="L197">		reportText.setText(&quot;A new advanture has started! What's next captain?\n\n\n&quot; + manager.getRoutesDescription());</span>
		// ======================

		// set scroll bar to top
<span class="nc" id="L201">		javax.swing.SwingUtilities.invokeLater(new Runnable() {</span>
			public void run() {
<span class="nc" id="L203">				scrollPane.getVerticalScrollBar().setValue(0);</span>
<span class="nc" id="L204">			}</span>
		});

		// Go to store button
<span class="nc" id="L208">		JButton storeButton = new JButton(&quot;Go to Store&quot;);</span>
<span class="nc" id="L209">		storeButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L210">		storeButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
<span class="nc" id="L213">				finishedPortWindow();</span>
<span class="nc" id="L214">			}</span>
		});
<span class="nc" id="L216">		storeButton.setBounds(510, 790, 180, 25);</span>
<span class="nc" id="L217">		portFrame.getContentPane().add(storeButton);</span>

		// Repair button
<span class="nc" id="L220">		JButton repairButton = new JButton(&quot;Repair Ship&quot;);</span>
<span class="nc" id="L221">		repairButton.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {
<span class="nc" id="L223">			}</span>
		});
<span class="nc" id="L225">		repairButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L226">		repairButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
				// call repair method from manager
<span class="nc" id="L230">				String report = manager.repair();</span>
<span class="nc" id="L231">				reportText.setText(report);</span>

				// update status labels
<span class="nc" id="L234">				int money = manager.getOwnedMoney();</span>
<span class="nc" id="L235">				moneyDisplayLabel.setText(String.valueOf(money));</span>

<span class="nc" id="L237">			}</span>
		});
<span class="nc" id="L239">		repairButton.setBackground(new Color(204, 153, 102));</span>
<span class="nc" id="L240">		repairButton.setBounds(255, 547, 180, 25);</span>
<span class="nc" id="L241">		portFrame.getContentPane().add(repairButton);</span>

		// Cost label for cannon number slider
<span class="nc" id="L244">		JLabel costLable = new JLabel(&quot;Cost:&quot;);</span>
<span class="nc" id="L245">		costLable.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L246">		costLable.setBounds(491, 636, 70, 15);</span>
<span class="nc" id="L247">		portFrame.getContentPane().add(costLable);</span>

		// Cost number label for cannon number slider
<span class="nc" id="L250">		JLabel cannonCostLable = new JLabel(&quot;N/A&quot;);</span>
<span class="nc" id="L251">		costLable.setLabelFor(cannonCostLable);</span>
<span class="nc" id="L252">		cannonCostLable.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L253">		cannonCostLable.setBounds(541, 636, 150, 15);</span>
<span class="nc" id="L254">		portFrame.getContentPane().add(cannonCostLable);</span>

		// Cannon number slider
<span class="nc" id="L257">		JSlider cannonNumSlider = new JSlider();</span>
<span class="nc" id="L258">		cannonNumSlider.addChangeListener(new ChangeListener() {</span>
			public void stateChanged(ChangeEvent e) {

				// update cannon cost
<span class="nc" id="L262">				int cannonNum = cannonNumSlider.getValue();</span>
<span class="nc" id="L263">				int totalCost = cannonNum * manager.getCostPerCannon();</span>
<span class="nc" id="L264">				cannonCostLable.setText(String.valueOf(totalCost) + &quot; coins&quot;);</span>
<span class="nc" id="L265">			}</span>
		});
<span class="nc" id="L267">		cannonNumSlider.setValue(1);</span>
<span class="nc" id="L268">		cannonNumSlider.setSnapToTicks(true);</span>
<span class="nc" id="L269">		cannonNumSlider.setPaintTicks(true);</span>
<span class="nc" id="L270">		cannonNumSlider.setPaintLabels(true);</span>
<span class="nc" id="L271">		cannonNumSlider.setMajorTickSpacing(1);</span>
<span class="nc" id="L272">		cannonNumSlider.setMinimum(1);</span>
<span class="nc" id="L273">		cannonNumSlider.setMaximum(10);</span>
<span class="nc" id="L274">		cannonNumSlider.setBounds(251, 636, 220, 40);</span>
<span class="nc" id="L275">		portFrame.getContentPane().add(cannonNumSlider);</span>

		// Update cannon cost when initializing
<span class="nc" id="L278">		int cannonNum = cannonNumSlider.getValue();</span>
<span class="nc" id="L279">		int totalCost = cannonNum * manager.getCostPerCannon();</span>
<span class="nc" id="L280">		cannonCostLable.setText(String.valueOf(totalCost) + &quot; coins&quot;);</span>

		// Upgrade cannon button
<span class="nc" id="L283">		JButton upgradeCannonsButton = new JButton(&quot;Upgrade Cannons&quot;);</span>
<span class="nc" id="L284">		upgradeCannonsButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {

				// get upgrade cannon number
<span class="nc" id="L289">				int cannonNum = cannonNumSlider.getValue();</span>

				// call upgrade method from manager
<span class="nc" id="L292">				String report = manager.upgradeCannons(cannonNum);</span>
<span class="nc" id="L293">				reportText.setText(report);</span>

				// update status labels
<span class="nc" id="L296">				int money = manager.getOwnedMoney();</span>
<span class="nc" id="L297">				moneyDisplayLabel.setText(String.valueOf(money));</span>

<span class="nc" id="L299">			}</span>
		});
<span class="nc" id="L301">		upgradeCannonsButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L302">		upgradeCannonsButton.setBackground(new Color(204, 153, 102));</span>
<span class="nc" id="L303">		upgradeCannonsButton.setBounds(51, 632, 180, 25);</span>
<span class="nc" id="L304">		portFrame.getContentPane().add(upgradeCannonsButton);</span>

		// View routes button
<span class="nc" id="L307">		JButton viewRoutesButton = new JButton(&quot;Available Routes&quot;);</span>
<span class="nc" id="L308">		viewRoutesButton.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {
<span class="nc" id="L310">			}</span>
		});
<span class="nc" id="L312">		viewRoutesButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {

<span class="nc" id="L316">				String routeReport = manager.getRoutesDescription();</span>
<span class="nc" id="L317">				reportText.setText(routeReport);</span>

				// set scroll bar to top
<span class="nc" id="L320">				javax.swing.SwingUtilities.invokeLater(new Runnable() {</span>
					public void run() {
<span class="nc" id="L322">						scrollPane.getVerticalScrollBar().setValue(0);</span>
<span class="nc" id="L323">					}</span>
				});

<span class="nc" id="L326">			}</span>
		});
<span class="nc" id="L328">		viewRoutesButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L329">		viewRoutesButton.setBackground(new Color(204, 153, 102));</span>
<span class="nc" id="L330">		viewRoutesButton.setBounds(50, 547, 180, 25);</span>
<span class="nc" id="L331">		portFrame.getContentPane().add(viewRoutesButton);</span>

		// Quit button
<span class="nc" id="L334">		JButton quitButton = new JButton(&quot;Quit&quot;);</span>
<span class="nc" id="L335">		quitButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L336">		quitButton.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {
<span class="nc" id="L338">			}</span>
		});
<span class="nc" id="L340">		quitButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
<span class="nc" id="L343">				System.exit(0);</span>
<span class="nc" id="L344">			}</span>
		});

		// Summary button
<span class="nc" id="L348">		JButton summaryButton = new JButton(&quot;Summary&quot;);</span>
<span class="nc" id="L349">		summaryButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L350">		summaryButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {

<span class="nc" id="L354">				String report = manager.gameOver();</span>
<span class="nc" id="L355">				reportText.setText(report);</span>
<span class="nc" id="L356">			}</span>
		});
<span class="nc" id="L358">		summaryButton.setBounds(300, 790, 117, 25);</span>
<span class="nc" id="L359">		portFrame.getContentPane().add(summaryButton);</span>
<span class="nc" id="L360">		summaryButton.setVisible(false);</span>
		
		// Destination radio buttons
<span class="nc" id="L363">		JRadioButton destRadionButton1 = new JRadioButton(&quot;N/A&quot;);</span>
<span class="nc" id="L364">		destRadionButton1.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L365">		destRadionButton1.setSelected(true);</span>
<span class="nc" id="L366">		destinationButtonGroup.add(destRadionButton1);</span>
<span class="nc" id="L367">		destRadionButton1.setBounds(255, 428, 250, 23);</span>
<span class="nc" id="L368">		portFrame.getContentPane().add(destRadionButton1);</span>

<span class="nc" id="L370">		JRadioButton destRadionButton2 = new JRadioButton(&quot;N/A&quot;);</span>
<span class="nc" id="L371">		destRadionButton2.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L372">		destinationButtonGroup.add(destRadionButton2);</span>
<span class="nc" id="L373">		destRadionButton2.setBounds(255, 455, 250, 23);</span>
<span class="nc" id="L374">		portFrame.getContentPane().add(destRadionButton2);</span>

<span class="nc" id="L376">		JRadioButton destRadionButton3 = new JRadioButton(&quot;N/A&quot;);</span>
<span class="nc" id="L377">		destRadionButton3.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L378">		destinationButtonGroup.add(destRadionButton3);</span>
<span class="nc" id="L379">		destRadionButton3.setBounds(255, 480, 250, 23);</span>
<span class="nc" id="L380">		portFrame.getContentPane().add(destRadionButton3);</span>

		// update destination radio buttons when initializing PortWindow
<span class="nc" id="L383">		ArrayList&lt;String&gt; islandNames = new ArrayList&lt;String&gt;();</span>
<span class="nc bnc" id="L384" title="All 2 branches missed.">		for (Route route : manager.getCurrentRoutes()) {</span>
<span class="nc" id="L385">			islandNames.add(route.getDest().getName());</span>
		}

<span class="nc" id="L388">		int i = 0;</span>
<span class="nc" id="L389">		Enumeration&lt;AbstractButton&gt; destinations = destinationButtonGroup.getElements();</span>
<span class="nc bnc" id="L390" title="All 4 branches missed.">		while (i &lt; islandNames.size() &amp;&amp; destinations.hasMoreElements()) {</span>
<span class="nc" id="L391">			JRadioButton destination = (JRadioButton) destinations.nextElement();</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">			if (destination.getText() == &quot;N/A&quot;) {</span>
<span class="nc" id="L393">				destination.setText(islandNames.get(i));</span>
			}
<span class="nc" id="L395">			i += 1;</span>
		}
		// ========================

		// Sail button
<span class="nc" id="L400">		JButton sailButton = new JButton(&quot;Sail to&quot;);</span>
<span class="nc" id="L401">		sailButton.addActionListener(new ActionListener() {</span>
			public void actionPerformed(ActionEvent e) {
<span class="nc" id="L403">			}</span>
		});
<span class="nc" id="L405">		sailButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L406">		sailButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
				// get selected island
<span class="nc" id="L410">				String destinationName = &quot;&quot;;</span>

<span class="nc" id="L412">				Enumeration&lt;AbstractButton&gt; destionations = destinationButtonGroup.getElements();</span>
<span class="nc bnc" id="L413" title="All 2 branches missed.">				while (destionations.hasMoreElements()) {</span>
<span class="nc" id="L414">					JRadioButton destination = (JRadioButton) destionations.nextElement();</span>
<span class="nc bnc" id="L415" title="All 2 branches missed.">					if (destination.isSelected()) {</span>
<span class="nc" id="L416">						destinationName = destination.getText();</span>
					}
				}

				// call manager to implement sail method
<span class="nc bnc" id="L421" title="All 2 branches missed.">				if (destinationName == &quot;N/A&quot;) {</span>

<span class="nc" id="L423">					reportText.setText(</span>
<span class="nc" id="L424">							&quot;The island you choose does not exist,\n&quot; + &quot;please choose your destination again.&quot;);</span>

<span class="nc" id="L426">				} else {</span>

<span class="nc" id="L428">					String report = manager.sail(destinationName);</span>

					// check if game over
<span class="nc bnc" id="L431" title="All 4 branches missed.">					if (manager.getTrader().noTimeToSail() || manager.getTrader().noMoneyToSail()) {</span>

						// update status labels
<span class="nc" id="L434">						int days = manager.getRemainingDays();</span>
<span class="nc" id="L435">						int money = manager.getOwnedMoney();</span>
<span class="nc" id="L436">						String islandLocation = manager.getCurrentIslandName();</span>

<span class="nc" id="L438">						DaysDisplayLabel.setText(String.valueOf(days));</span>
<span class="nc" id="L439">						moneyDisplayLabel.setText(String.valueOf(money));</span>
<span class="nc" id="L440">						locationDisplayLabel.setText(islandLocation);</span>

						// update report
<span class="nc" id="L443">						String gameOverReason = &quot;&quot;;</span>
<span class="nc bnc" id="L444" title="All 2 branches missed.">						if (manager.getTrader().noTimeToSail()) {</span>
<span class="nc" id="L445">							gameOverReason = &quot;Time is up. You don't have time to sail anywhere.&quot;;</span>
<span class="nc" id="L446">						} else {</span>
<span class="nc" id="L447">							gameOverReason = &quot;You have lost all your money!&quot;;</span>
						}
<span class="nc" id="L449">						report = &quot;==============GAME OVER============\n\n&quot; </span>
<span class="nc" id="L450">								 + gameOverReason</span>
<span class="nc" id="L451">						         + report;</span>
<span class="nc" id="L452">						reportText.setText(report);</span>

						// set all buttons invisible except for &quot;Quit&quot;
<span class="nc" id="L455">						sailButton.setVisible(false);</span>
<span class="nc" id="L456">						destRadionButton1.setVisible(false);</span>
<span class="nc" id="L457">						destRadionButton2.setVisible(false);</span>
<span class="nc" id="L458">						destRadionButton3.setVisible(false);</span>
<span class="nc" id="L459">						upgradeCannonsButton.setVisible(false);</span>
<span class="nc" id="L460">						cannonNumSlider.setVisible(false);</span>
<span class="nc" id="L461">						costLable.setVisible(false);</span>
<span class="nc" id="L462">						cannonCostLable.setVisible(false);</span>
<span class="nc" id="L463">						viewRoutesButton.setVisible(false);</span>
<span class="nc" id="L464">						repairButton.setVisible(false);</span>
<span class="nc" id="L465">						storeButton.setVisible(false);</span>

						// set Summary button visible
<span class="nc" id="L468">						summaryButton.setVisible(true);</span>

<span class="nc" id="L470">						javax.swing.SwingUtilities.invokeLater(new Runnable() {</span>
							public void run() {
<span class="nc" id="L472">								scrollPane.getVerticalScrollBar().setValue(0);</span>
<span class="nc" id="L473">							}</span>
						});

<span class="nc" id="L476">					} else {</span>

						// update report
<span class="nc" id="L479">						reportText.setText(report);</span>

						// update status labels
<span class="nc" id="L482">						int days = manager.getRemainingDays();</span>
<span class="nc" id="L483">						int money = manager.getOwnedMoney();</span>
<span class="nc" id="L484">						String islandLocation = manager.getCurrentIslandName();</span>

<span class="nc" id="L486">						DaysDisplayLabel.setText(String.valueOf(days));</span>
<span class="nc" id="L487">						moneyDisplayLabel.setText(String.valueOf(money));</span>
<span class="nc" id="L488">						locationDisplayLabel.setText(islandLocation);</span>

						// update cannon cost
<span class="nc" id="L491">						int cannonNum = cannonNumSlider.getValue();</span>
<span class="nc" id="L492">						int totalCost = cannonNum * manager.getCostPerCannon();</span>
<span class="nc" id="L493">						cannonCostLable.setText(String.valueOf(totalCost) + &quot; coins&quot;);</span>

						// update sail destination radio buttons
<span class="nc" id="L496">						ArrayList&lt;String&gt; islandNames = new ArrayList&lt;String&gt;();</span>
<span class="nc bnc" id="L497" title="All 2 branches missed.">						for (Route route : manager.getCurrentRoutes()) {</span>
<span class="nc" id="L498">							islandNames.add(route.getDest().getName());</span>
						}

<span class="nc" id="L501">						int i = 0;</span>
<span class="nc" id="L502">						Enumeration&lt;AbstractButton&gt; destinations = destinationButtonGroup.getElements();</span>
<span class="nc bnc" id="L503" title="All 2 branches missed.">						while (destinations.hasMoreElements()) {</span>
<span class="nc" id="L504">							JRadioButton destination = (JRadioButton) destinations.nextElement();</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">							if (i &lt; islandNames.size()) {</span>
<span class="nc" id="L506">								destination.setText(islandNames.get(i));</span>
<span class="nc" id="L507">							} else {</span>
<span class="nc" id="L508">								destination.setText(&quot;N/A&quot;);</span>
							}
<span class="nc" id="L510">							i += 1;</span>
						}

<span class="nc" id="L513">						javax.swing.SwingUtilities.invokeLater(new Runnable() {</span>
							public void run() {
<span class="nc" id="L515">								scrollPane.getVerticalScrollBar().setValue(0);</span>
<span class="nc" id="L516">							}</span>
						});

					}

				}

<span class="nc" id="L523">			}</span>
		});

<span class="nc" id="L526">		sailButton.setBackground(new Color(204, 153, 102));</span>
<span class="nc" id="L527">		sailButton.setBounds(50, 450, 180, 25);</span>
<span class="nc" id="L528">		portFrame.getContentPane().add(sailButton);</span>

	

<span class="nc" id="L532">		JSeparator separator1 = new JSeparator();</span>
<span class="nc" id="L533">		separator1.setBounds(45, 515, 650, 2);</span>
<span class="nc" id="L534">		portFrame.getContentPane().add(separator1);</span>
<span class="nc" id="L535">		quitButton.setBackground(new Color(255, 102, 102));</span>
<span class="nc" id="L536">		quitButton.setBounds(175, 790, 100, 25);</span>
<span class="nc" id="L537">		portFrame.getContentPane().add(quitButton);</span>

<span class="nc" id="L539">		JSeparator separator2 = new JSeparator();</span>
<span class="nc" id="L540">		separator2.setBounds(45, 690, 650, 2);</span>
<span class="nc" id="L541">		portFrame.getContentPane().add(separator2);</span>

		// Restart button
<span class="nc" id="L544">		JButton restartButton = new JButton(&quot;Restart&quot;);</span>
<span class="nc" id="L545">		restartButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
				
<span class="nc" id="L549">				restartSetupWindow();</span>

<span class="nc" id="L551">			}</span>
		});
<span class="nc" id="L553">		restartButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L554">		restartButton.setBackground(new Color(255, 102, 102));</span>
<span class="nc" id="L555">		restartButton.setBounds(50, 790, 100, 25);</span>
<span class="nc" id="L556">		portFrame.getContentPane().add(restartButton);</span>

		// View ship button
<span class="nc" id="L559">		JButton viewShipButton = new JButton(&quot;Ship Status&quot;);</span>
<span class="nc" id="L560">		viewShipButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {

<span class="nc" id="L564">				String shipStatus = manager.getShipDescription() + &quot;\n&quot; + manager.getCargosDescription() + &quot;\n&quot;</span>
<span class="nc" id="L565">						+ manager.getUpgradeLogsDescription();</span>
<span class="nc" id="L566">				reportText.setText(shipStatus);</span>

				// set scroll bar to top
<span class="nc" id="L569">				javax.swing.SwingUtilities.invokeLater(new Runnable() {</span>
					public void run() {
<span class="nc" id="L571">						scrollPane.getVerticalScrollBar().setValue(0);</span>
<span class="nc" id="L572">					}</span>
				});
<span class="nc" id="L574">			}</span>
		});
<span class="nc" id="L576">		viewShipButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L577">		viewShipButton.setBackground(new Color(204, 153, 102));</span>
<span class="nc" id="L578">		viewShipButton.setBounds(255, 720, 180, 25);</span>
<span class="nc" id="L579">		portFrame.getContentPane().add(viewShipButton);</span>

		// View trader button
<span class="nc" id="L582">		JButton viewTraderButton = new JButton(&quot;Trader Status&quot;);</span>
<span class="nc" id="L583">		viewTraderButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {

<span class="nc" id="L587">				String traderStatus = manager.getTraderDescription() + &quot;\n\n&quot; + manager.getTradingLogsDescription();</span>
<span class="nc" id="L588">				reportText.setText(traderStatus);</span>

				// set scroll bar to top
<span class="nc" id="L591">				javax.swing.SwingUtilities.invokeLater(new Runnable() {</span>
					public void run() {
<span class="nc" id="L593">						scrollPane.getVerticalScrollBar().setValue(0);</span>
<span class="nc" id="L594">					}</span>
				});

<span class="nc" id="L597">			}</span>
		});
<span class="nc" id="L599">		viewTraderButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L600">		viewTraderButton.setBackground(new Color(204, 153, 102));</span>
<span class="nc" id="L601">		viewTraderButton.setBounds(50, 720, 180, 25);</span>
<span class="nc" id="L602">		portFrame.getContentPane().add(viewTraderButton);</span>

<span class="nc" id="L604">		JSeparator separator2_1 = new JSeparator();</span>
<span class="nc" id="L605">		separator2_1.setBounds(45, 600, 650, 2);</span>
<span class="nc" id="L606">		portFrame.getContentPane().add(separator2_1);</span>

<span class="nc" id="L608">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span>src (May 26, 2021 9:58:16 PM)</div></body></html>