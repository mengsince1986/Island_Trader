<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>SetupWindow.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">src (May 26, 2021 9:58:16 PM)</a> &gt; <a href="../../index.html" class="el_group">IslandTraderGUI</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">gui</a> &gt; <span class="el_source">SetupWindow.java</span></div><h1>SetupWindow.java</h1><pre class="source lang-java linenums">package gui;

import javax.swing.JFrame;
import javax.swing.JLabel;
import java.awt.Font;
import java.util.Enumeration;

import javax.swing.SwingConstants;

import main.GUIGameEnvironment;

import javax.swing.JTextField;
import javax.swing.JSlider;
import javax.swing.JRadioButton;
import javax.swing.JButton;
import javax.swing.AbstractButton;
import javax.swing.ButtonGroup;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JTextArea;
import java.awt.Color;
import javax.swing.JSeparator;

/**
 * The SetupWindow is the GUI interface for setting up a new player. It gets the
 * name of the new player, the number of the remaining days, the name of the
 * home island and the name of the ship chosen by users and passes them to
 * attribute manager - {@link GUIGameEnvironment} object - to create a new Trader 
 * object and a new Ship object.
 * &lt;p&gt;
 * The SetupWindow checks and validates the name input by users and print
 * error report if the new name doesn't pass the preset validation.
 * &lt;p&gt;
 * The SetupWindow also prints the profile of the new created player or an error
 * message if any of the input information is invalid after users click the
 * confirm button.
 * 
 * @author Finn van Dorsser
 * @author Meng Zhang
 */

public class SetupWindow {

	/**
	 * Attribute setupFrame stores the Frame object of this window.
	 */
	private JFrame setupFrame;
	
	/**
	 * Attribute nameTextField stores the string of the new name entered by 
	 * users.
	 */
	private JTextField nameTextField;
	
	/**
	 * Attribute shipButtonGroup stores a ButtonGroup object including all the
	 * RadioButtons with the name of the available Ship objects.
	 */
<span class="nc" id="L59">	private final ButtonGroup shipButtonGroup = new ButtonGroup();</span>
	
	/**
	 * Attribute homeButtonGroup stores a ButtonGroup object including all the
	 * RadioButtons with the name of the available Island objects.
	 */
<span class="nc" id="L65">	private final ButtonGroup homeButtonGroup = new ButtonGroup();</span>
	
	/**
	 * Attribute manager is the {@link GUIGameEnvironment} object which maintains the 
	 * state of the program and makes instances of window classes.
	 */
	private GUIGameEnvironment manager;
	
	// This static main method is only used for initializing this window frame
	// individually for testing
	/*
	 * public static void main(String[] args) {
	 * 
	 * EventQueue.invokeLater(new Runnable() { public void run() { try { SetupWindow
	 * window = new SetupWindow(); window.frame.setVisible(true); } catch (Exception
	 * e) { e.printStackTrace(); } } });
	 * 
	 * 
	 * }
	 */

	/**
	 * This constructor sets the value of manager attribute, initializes this
	 * Frame object and sets this frame to be visible.
	 * @param incomingManager the current {@link GUIGameEnvironment} object
	 */
<span class="nc" id="L91">	public SetupWindow(GUIGameEnvironment incomingManager) {</span>
<span class="nc" id="L92">		this.manager = incomingManager;</span>
<span class="nc" id="L93">		initialize();</span>
<span class="nc" id="L94">		setupFrame.setVisible(true);</span>
<span class="nc" id="L95">	}</span>

	/**
	 * This method disposes this window frame.
	 */
	public void closeSetupWindow() {
<span class="nc" id="L101">		setupFrame.dispose();</span>
<span class="nc" id="L102">	}</span>

	/**
	 * This method closes this window frame and launches the PortWindow frame 
	 * by calling the closeSetupWindow method from manager which is the
	 * current {@link GUIGameEnvironment} object.
	 */
	public void finishedSetupWindow() {
<span class="nc" id="L110">		this.manager.closeSetupWindow(this);</span>
<span class="nc" id="L111">	}</span>

	/**
	 * This method initializes the contents of the frame.
	 */
	private void initialize() {
<span class="nc" id="L117">		setupFrame = new JFrame();</span>
<span class="nc" id="L118">		setupFrame.setTitle(&quot;Island Trader - New Player&quot;);</span>
<span class="nc" id="L119">		setupFrame.setBounds(100, 100, 631, 579);</span>
<span class="nc" id="L120">		setupFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L121">		setupFrame.getContentPane().setLayout(null);</span>

<span class="nc" id="L123">		JLabel welcomeLabel = new JLabel(&quot;Create a new player&quot;);</span>
<span class="nc" id="L124">		welcomeLabel.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L125">		welcomeLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 18));</span>
<span class="nc" id="L126">		welcomeLabel.setBounds(175, 12, 300, 30);</span>
<span class="nc" id="L127">		setupFrame.getContentPane().add(welcomeLabel);</span>

<span class="nc" id="L129">		JLabel nameLabel = new JLabel(&quot;Name: &quot;);</span>
<span class="nc" id="L130">		nameLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L131">		nameLabel.setHorizontalAlignment(SwingConstants.RIGHT);</span>
<span class="nc" id="L132">		nameLabel.setBounds(87, 70, 70, 15);</span>
<span class="nc" id="L133">		setupFrame.getContentPane().add(nameLabel);</span>

<span class="nc" id="L135">		nameTextField = new JTextField();</span>
<span class="nc" id="L136">		nameTextField.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L137">		nameTextField.setText(&quot;Alice&quot;);</span>
<span class="nc" id="L138">		nameLabel.setLabelFor(nameTextField);</span>
<span class="nc" id="L139">		nameTextField.setBounds(175, 68, 205, 25);</span>
<span class="nc" id="L140">		setupFrame.getContentPane().add(nameTextField);</span>
<span class="nc" id="L141">		nameTextField.setColumns(10);</span>

<span class="nc" id="L143">		JLabel dayLabel = new JLabel(&quot;Days:&quot;);</span>
<span class="nc" id="L144">		dayLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L145">		dayLabel.setHorizontalAlignment(SwingConstants.RIGHT);</span>
<span class="nc" id="L146">		dayLabel.setBounds(86, 122, 70, 15);</span>
<span class="nc" id="L147">		setupFrame.getContentPane().add(dayLabel);</span>

<span class="nc" id="L149">		JSlider daysSlider = new JSlider();</span>
<span class="nc" id="L150">		daysSlider.setValue(35);</span>
<span class="nc" id="L151">		daysSlider.setMaximum(50);</span>
<span class="nc" id="L152">		daysSlider.setMinimum(20);</span>
<span class="nc" id="L153">		daysSlider.setPaintLabels(true);</span>
<span class="nc" id="L154">		daysSlider.setPaintTicks(true);</span>
<span class="nc" id="L155">		daysSlider.setSnapToTicks(true);</span>
<span class="nc" id="L156">		daysSlider.setMinorTickSpacing(5);</span>
<span class="nc" id="L157">		daysSlider.setMajorTickSpacing(5);</span>
<span class="nc" id="L158">		dayLabel.setLabelFor(daysSlider);</span>
<span class="nc" id="L159">		daysSlider.setBounds(166, 117, 205, 40);</span>
<span class="nc" id="L160">		setupFrame.getContentPane().add(daysSlider);</span>

<span class="nc" id="L162">		JSeparator separator1 = new JSeparator();</span>
<span class="nc" id="L163">		separator1.setBounds(90, 175, 450, 2);</span>
<span class="nc" id="L164">		setupFrame.getContentPane().add(separator1);</span>

<span class="nc" id="L166">		JLabel homeLabel = new JLabel(&quot;Home:&quot;);</span>
<span class="nc" id="L167">		homeLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L168">		homeLabel.setHorizontalAlignment(SwingConstants.RIGHT);</span>
<span class="nc" id="L169">		homeLabel.setBounds(86, 195, 70, 15);</span>
<span class="nc" id="L170">		setupFrame.getContentPane().add(homeLabel);</span>

<span class="nc" id="L172">		JRadioButton island1Button = new JRadioButton(&quot;Mecca Merchantia&quot;);</span>
<span class="nc" id="L173">		island1Button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L174">		island1Button.setSelected(true);</span>
<span class="nc" id="L175">		homeButtonGroup.add(island1Button);</span>
<span class="nc" id="L176">		island1Button.setBounds(166, 193, 190, 23);</span>
<span class="nc" id="L177">		setupFrame.getContentPane().add(island1Button);</span>

<span class="nc" id="L179">		JRadioButton island2Button = new JRadioButton(&quot;Ceylon&quot;);</span>
<span class="nc" id="L180">		island2Button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L181">		homeButtonGroup.add(island2Button);</span>
<span class="nc" id="L182">		island2Button.setBounds(393, 193, 149, 23);</span>
<span class="nc" id="L183">		setupFrame.getContentPane().add(island2Button);</span>

<span class="nc" id="L185">		JRadioButton island3Button = new JRadioButton(&quot;Lord Matheson Island&quot;);</span>
<span class="nc" id="L186">		homeButtonGroup.add(island3Button);</span>
<span class="nc" id="L187">		island3Button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L188">		island3Button.setBounds(166, 247, 205, 23);</span>
<span class="nc" id="L189">		setupFrame.getContentPane().add(island3Button);</span>

<span class="nc" id="L191">		JRadioButton island4Button = new JRadioButton(&quot;Niawall's Tear&quot;);</span>
<span class="nc" id="L192">		homeButtonGroup.add(island4Button);</span>
<span class="nc" id="L193">		island4Button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L194">		island4Button.setBounds(393, 221, 155, 23);</span>
<span class="nc" id="L195">		setupFrame.getContentPane().add(island4Button);</span>

<span class="nc" id="L197">		JRadioButton island5Button = new JRadioButton(&quot;The Isle of Dwarves&quot;);</span>
<span class="nc" id="L198">		homeButtonGroup.add(island5Button);</span>
<span class="nc" id="L199">		island5Button.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L200">		island5Button.setBounds(166, 221, 200, 23);</span>
<span class="nc" id="L201">		setupFrame.getContentPane().add(island5Button);</span>

<span class="nc" id="L203">		JSeparator separator2 = new JSeparator();</span>
<span class="nc" id="L204">		separator2.setBounds(90, 285, 450, 2);</span>
<span class="nc" id="L205">		setupFrame.getContentPane().add(separator2);</span>

<span class="nc" id="L207">		JLabel shipLabel = new JLabel(&quot;Ship:&quot;);</span>
<span class="nc" id="L208">		shipLabel.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L209">		shipLabel.setHorizontalAlignment(SwingConstants.RIGHT);</span>
<span class="nc" id="L210">		shipLabel.setBounds(86, 300, 70, 15);</span>
<span class="nc" id="L211">		setupFrame.getContentPane().add(shipLabel);</span>

<span class="nc" id="L213">		JRadioButton fastShipRadioButton = new JRadioButton(&quot;Black Pearl&quot;);</span>
<span class="nc" id="L214">		fastShipRadioButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L215">		shipButtonGroup.add(fastShipRadioButton);</span>
<span class="nc" id="L216">		fastShipRadioButton.setSelected(true);</span>
<span class="nc" id="L217">		fastShipRadioButton.setBounds(166, 297, 149, 23);</span>
<span class="nc" id="L218">		setupFrame.getContentPane().add(fastShipRadioButton);</span>

<span class="nc" id="L220">		JRadioButton balancedShipRadioButton = new JRadioButton(&quot;Redcoasts&quot;);</span>
<span class="nc" id="L221">		balancedShipRadioButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L222">		shipButtonGroup.add(balancedShipRadioButton);</span>
<span class="nc" id="L223">		balancedShipRadioButton.setBounds(166, 324, 149, 23);</span>
<span class="nc" id="L224">		setupFrame.getContentPane().add(balancedShipRadioButton);</span>

<span class="nc" id="L226">		JRadioButton battleShipRadioButton = new JRadioButton(&quot;Endeavour&quot;);</span>
<span class="nc" id="L227">		battleShipRadioButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L228">		shipButtonGroup.add(battleShipRadioButton);</span>
<span class="nc" id="L229">		battleShipRadioButton.setBounds(315, 297, 149, 23);</span>
<span class="nc" id="L230">		setupFrame.getContentPane().add(battleShipRadioButton);</span>

<span class="nc" id="L232">		JRadioButton baoShipRadioButton = new JRadioButton(&quot;Empress&quot;);</span>
<span class="nc" id="L233">		baoShipRadioButton.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L234">		shipButtonGroup.add(baoShipRadioButton);</span>
<span class="nc" id="L235">		baoShipRadioButton.setBounds(315, 324, 149, 23);</span>
<span class="nc" id="L236">		setupFrame.getContentPane().add(baoShipRadioButton);</span>

		// Quit Button
<span class="nc" id="L239">		JButton quitBtn = new JButton(&quot;Quit&quot;);</span>
<span class="nc" id="L240">		quitBtn.setBackground(new Color(255, 102, 102));</span>
<span class="nc" id="L241">		quitBtn.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
				// actions for quit button
<span class="nc" id="L245">				System.exit(0);</span>
<span class="nc" id="L246">			}</span>
		});

		// Report Text Area
<span class="nc" id="L250">		JTextArea reportText = new JTextArea();</span>
<span class="nc" id="L251">		reportText.setWrapStyleWord(true);</span>
<span class="nc" id="L252">		reportText.setLineWrap(true);</span>
<span class="nc" id="L253">		reportText.setFont(new Font(&quot;Dialog&quot;, Font.BOLD, 14));</span>
<span class="nc" id="L254">		reportText.setEditable(false);</span>
<span class="nc" id="L255">		reportText.setText(&quot;Welcome to Island Trader!\n\nLet's create a new trader here.&quot;);</span>
<span class="nc" id="L256">		reportText.setBounds(90, 438, 450, 70);</span>
<span class="nc" id="L257">		setupFrame.getContentPane().add(reportText);</span>

<span class="nc" id="L259">		quitBtn.setBounds(102, 387, 80, 25);</span>
<span class="nc" id="L260">		setupFrame.getContentPane().add(quitBtn);</span>

		// Confirm Button
<span class="nc" id="L263">		JButton confirmBtn = new JButton(&quot;Confirm&quot;);</span>
<span class="nc" id="L264">		confirmBtn.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
				// actions for confirm button
				String name;
				int days;
<span class="nc" id="L270">				String islandName = &quot;&quot;;</span>
<span class="nc" id="L271">				String shipName = &quot;&quot;;</span>

				// get and validate name
<span class="nc" id="L274">				name = nameTextField.getText();</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">				if (name.length() &lt;= 0) {</span>
<span class="nc" id="L276">					reportText.setText(&quot;Please enter your name.&quot;);</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">				} else if (!name.matches(&quot;[a-zA-Z]+&quot;)) {</span>
<span class="nc" id="L278">					reportText.setText(&quot;Sorry, the name can only include letters.\n&quot;</span>
							+ &quot;Please check if your name includes space, numbers or special characters.&quot;);
<span class="nc bnc" id="L280" title="All 4 branches missed.">				} else if (name.length() &lt; 3 || name.length() &gt; 15) {</span>
<span class="nc" id="L281">					reportText.setText(&quot;The name should be between 3 and 15 characters.&quot;);</span>
<span class="nc" id="L282">				} else {</span>

					// get days
<span class="nc" id="L285">					days = daysSlider.getValue();</span>

					// get island name
<span class="nc" id="L288">					Enumeration&lt;AbstractButton&gt; homes = homeButtonGroup.getElements();</span>
<span class="nc bnc" id="L289" title="All 2 branches missed.">					while (homes.hasMoreElements()) {</span>
<span class="nc" id="L290">						JRadioButton home = (JRadioButton) homes.nextElement();</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">						if (home.isSelected()) {</span>
<span class="nc" id="L292">							islandName = home.getText();</span>
						}
					}

					// get ship name
<span class="nc" id="L297">					Enumeration&lt;AbstractButton&gt; ships = shipButtonGroup.getElements();</span>
<span class="nc bnc" id="L298" title="All 2 branches missed.">					while (ships.hasMoreElements()) {</span>
<span class="nc" id="L299">						JRadioButton ship = (JRadioButton) ships.nextElement();</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">						if (ship.isSelected()) {</span>
<span class="nc" id="L301">							shipName = ship.getText();</span>
						}
					}

					String report;
<span class="nc" id="L306">					report = manager.setTrader(name, days, islandName, shipName);</span>
<span class="nc" id="L307">					reportText.setText(report);</span>

				}

<span class="nc" id="L311">			}</span>
		});
<span class="nc" id="L313">		confirmBtn.setBounds(242, 387, 117, 25);</span>
<span class="nc" id="L314">		setupFrame.getContentPane().add(confirmBtn);</span>

		// Start Button
<span class="nc" id="L317">		JButton startButton = new JButton(&quot;Start Game&quot;);</span>
<span class="nc" id="L318">		startButton.addMouseListener(new MouseAdapter() {</span>
			@Override
			public void mouseClicked(MouseEvent e) {
<span class="nc bnc" id="L321" title="All 2 branches missed.">				if (manager.getTrader() != null) {</span>
<span class="nc" id="L322">					finishedSetupWindow();</span>
				}
<span class="nc" id="L324">				reportText.setText(&quot;You need to create a new player\n&quot; </span>
								 + &quot;and click \&quot;Confirm\&quot; button first.&quot;);
<span class="nc" id="L326">			}</span>
		});
<span class="nc" id="L328">		startButton.setBounds(383, 387, 117, 25);</span>
<span class="nc" id="L329">		setupFrame.getContentPane().add(startButton);</span>

<span class="nc" id="L331">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span>src (May 26, 2021 9:58:16 PM)</div></body></html>